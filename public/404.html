<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="robots" content="noindex" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Redirigiendoâ€¦</title>
    <script>
      // When GitHub Pages serves this 404 for an SPA route, fetch the SPA's index.html
      // and inline it into the document while keeping the original URL. This allows
      // BrowserRouter (history API) to read the pathname and render the correct page
      // without switching to hash-based routes.
      (function () {
        try {
          var pathname = window.location.pathname;
          var search = window.location.search;
          var hash = window.location.hash;
          
          // Check if this is a bot/crawler
          var isBot = /bot|crawler|spider|crawling/i.test(navigator.userAgent);
          
          // For specific routes, serve static HTML to bots but redirect users to SPA
          if (pathname === '/vidrios' || pathname === '/andamios') {
            if (isBot) {
              // Redirect bots to static HTML files
              window.location.replace(pathname + '.html');
              return;
            }
            // For users, redirect to SPA with proper routing
            window.location.replace('/?redirect=' + encodeURIComponent(pathname + search + hash));
            return;
          }
          
          // Default SPA redirect behavior for other routes
          var parts = window.location.pathname.split('/');
          var host = window.location.hostname || '';
          // On custom domains (congen.com.pe) use root '/' as base. On github.io project pages
          // the repo name is the first path segment (user.github.io/repo). Detect that by host.
          var repoBase = '/';
          if (/\.github\.io$/.test(host)) {
            if (parts.length > 1 && parts[1]) {
              repoBase = '/' + parts[1] + '/';
            }
          }
          var requested = pathname + search + hash;
          // If we computed a repoBase and the requested path starts with it, strip it for the fetch target
          if (repoBase !== '/' && requested.indexOf(repoBase) === 0) {
            requested = requested.slice(repoBase.length);
          }
          var indexUrl = repoBase + 'index.html';

          // Fetch the deployed index.html and write it into the current document.
          // After writing, restore the original URL in the address bar so the SPA
          // sees the correct pathname.
          fetch(indexUrl, {cache: 'no-store'}).then(function (response) {
            if (!response.ok) {
              // If fetching fails, fallback to repo root
              window.location.replace(repoBase);
              return null;
            }
            return response.text();
          }).then(function (html) {
            if (!html) return;
            document.open();
            document.write(html);
            document.close();
            try {
              // Restore the original requested URL so the SPA router can match it
              history.replaceState(null, '', requested);
            } catch (e) {
              // If replaceState fails, try a conservative replace to repo base
              window.location.replace(repoBase);
            }
          }).catch(function () {
            window.location.replace(repoBase);
          });
        } catch (e) {
          // Fallback: send to repo root (best-effort)
          var parts = window.location.pathname.split('/');
          var repoBase = parts.length > 1 && parts[1] ? '/' + parts[1] + '/' : '/';
          window.location.replace(repoBase);
        }
      })();
    </script>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-P2QX664F');</script>
  <!-- End Google Tag Manager -->
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P2QX664F" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <p>Redirigiendo... <span id="home-link">Volver al inicio</span></p>
    <script>
      // Provide a normal link as a fallback while the fetch runs.
      (function(){
        var parts = window.location.pathname.split('/');
        var host = window.location.hostname || '';
        var repoBase = '/';
        if (/\.github\.io$/.test(host)) {
          if (parts.length > 1 && parts[1]) {
            repoBase = '/' + parts[1] + '/';
          }
        }
        var a = document.createElement('a');
        a.href = repoBase;
        a.textContent = 'Volver al inicio';
        var span = document.getElementById('home-link');
        if(span) span.parentNode.replaceChild(a, span);
      })();
    </script>
  </body>
</html>
